<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Me Lembre Depois</title>

<link rel="manifest" href="manifest.json">

<style>

body{
font-family:-apple-system;
background:#f2f2f7;
margin:0;
padding:20px;
}

h2{
margin-top:10px;
}

button{
background:#007aff;
color:white;
border:none;
padding:14px;
border-radius:14px;
font-size:16px;
width:100%;
margin-top:10px;
}

input{
width:100%;
padding:12px;
margin-top:8px;
border-radius:10px;
border:1px solid #ddd;
}

.card{
background:white;
border-radius:16px;
padding:14px;
margin-top:12px;
box-shadow:0 2px 6px rgba(0,0,0,0.05);
}

.data{
color:#666;
font-size:13px;
margin-top:4px;
}

.faltam{
color:#007aff;
font-size:13px;
margin-top:4px;
}

.apagar{
margin-top:8px;
background:#ff3b30;
}

</style>
</head>

<body>

<h2>Me Lembre Depois</h2>

<input id="texto" placeholder="Digite algo...">
<input type="datetime-local" id="data">

<button onclick="adicionar()">+ Novo Lembrete</button>

<div id="lista"></div>

<script>

let lembretes = JSON.parse(localStorage.getItem("lembretes")||"[]")

function salvar(){
localStorage.setItem("lembretes",JSON.stringify(lembretes))
render()
}

function adicionar(){

let texto = document.getElementById("texto").value
let data = document.getElementById("data").value

if(!texto || !data) return

lembretes.push({id:Date.now(),texto,data})
salvar()

document.getElementById("texto").value=""
}

function diasRestantes(data){

let hoje = new Date()
let futuro = new Date(data)

let diff = futuro-hoje

let dias = Math.ceil(diff/(1000*60*60*24))

if(dias<=0) return "Hoje"
if(dias==1) return "Falta 1 dia"
return "Faltam "+dias+" dias"
}

function apagar(id){
lembretes = lembretes.filter(l=>l.id!==id)
salvar()
}

function render(){

let div = document.getElementById("lista")
div.innerHTML=""

lembretes.sort((a,b)=> new Date(a.data)-new Date(b.data))

lembretes.forEach(l=>{

div.innerHTML+=`
<div class="card">
<b>${l.texto}</b>
<div class="data">${new Date(l.data).toLocaleString()}</div>
<div class="faltam">${diasRestantes(l.data)}</div>
<button class="apagar" onclick="apagar(${l.id})">Apagar</button>
</div>
`
})
}

render()

if('serviceWorker' in navigator){
navigator.serviceWorker.register('service-worker.js')
}

</script>

</body>
</html>
