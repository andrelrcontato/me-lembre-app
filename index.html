<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Me Lembre Depois</title>

<link rel="manifest" href="manifest.json">

<style>

:root{
--bg:#f2f2f7;
--card:#ffffff;
--text:#000;
}

@media (prefers-color-scheme: dark){
:root{
--bg:#000;
--card:#1c1c1e;
--text:#fff;
}
}

body{
font-family:-apple-system;
background:var(--bg);
color:var(--text);
margin:0;
padding:20px;
}

h2{margin-top:10px;}

input{
width:100%;
padding:12px;
margin-top:8px;
border-radius:10px;
border:1px solid #444;
background:var(--card);
color:var(--text);
}

.fab{
position:fixed;
bottom:30px;
right:20px;
background:#007aff;
color:white;
border:none;
width:60px;
height:60px;
border-radius:50%;
font-size:28px;
box-shadow:0 6px 14px rgba(0,0,0,0.2);
}

.card{
background:var(--card);
border-radius:16px;
padding:14px;
margin-top:12px;
animation:fade .25s ease;
}

@keyframes fade{
from{opacity:0; transform:translateY(8px);}
to{opacity:1; transform:translateY(0);}
}

.data{color:#888;font-size:13px;margin-top:4px;}

.apagar{
margin-top:8px;
background:#ff3b30;
color:white;
border:none;
padding:8px;
border-radius:10px;
width:100%;
}

.editar{
margin-top:8px;
background:#007aff;
color:white;
border:none;
padding:8px;
border-radius:10px;
width:100%;
}

</style>
</head>

<body>

<h2>Me Lembre Depois</h2>

<input id="texto" placeholder="Digite algo...">
<input type="datetime-local" id="data">

<div id="lista"></div>

<button class="fab" onclick="adicionar()">+</button>

<script>

let lembretes = JSON.parse(localStorage.getItem("lembretes")||"[]")
let editando = null

function salvar(){
localStorage.setItem("lembretes",JSON.stringify(lembretes))
render()
}

function adicionar(){

let texto = document.getElementById("texto").value
let data = document.getElementById("data").value

if(!texto || !data) return

if(editando){
let l = lembretes.find(x=>x.id===editando)
l.texto = texto
l.data = data
editando=null
}else{
lembretes.push({id:Date.now(),texto,data})
}

salvar()

document.getElementById("texto").value=""
}

function editar(id){
let l = lembretes.find(x=>x.id===id)
document.getElementById("texto").value = l.texto
document.getElementById("data").value = l.data
editando=id
}

function apagar(id){
lembretes = lembretes.filter(l=>l.id!==id)
salvar()
}

function render(){

let div = document.getElementById("lista")
div.innerHTML=""

lembretes.sort((a,b)=> new Date(a.data)-new Date(b.data))

lembretes.forEach(l=>{

div.innerHTML+=`
<div class="card">
<b>ðŸ“… ${l.texto}</b>
<div class="data">${new Date(l.data).toLocaleString()}</div>
<button class="editar" onclick="editar(${l.id})">Editar</button>
<button class="apagar" onclick="apagar(${l.id})">Apagar</button>
</div>
`
})
}

render()

if('serviceWorker' in navigator){
navigator.serviceWorker.register('service-worker.js')
}

</script>

</body>
</html>
