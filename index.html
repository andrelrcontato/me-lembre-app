<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Me Lembre Depois</title>

<link rel="manifest" href="manifest.json">

<style>

body{
font-family:-apple-system;
background:#f2f2f7;
margin:0;
padding:20px;
}

h2{margin-top:10px;}

button{
background:#007aff;
color:white;
border:none;
padding:14px;
border-radius:14px;
font-size:16px;
width:100%;
margin-top:10px;
}

input{
width:100%;
padding:12px;
margin-top:8px;
border-radius:10px;
border:1px solid #ddd;
}

.card{
background:white;
border-radius:16px;
padding:14px;
margin-top:12px;
box-shadow:0 2px 8px rgba(0,0,0,0.06);
animation:fade .25s ease;
}

@keyframes fade{
from{opacity:0; transform:translateY(8px);}
to{opacity:1; transform:translateY(0);}
}

.data{color:#666;font-size:13px;margin-top:4px;}
.faltam{font-size:13px;margin-top:4px;font-weight:500;}

.proximo{border-left:6px solid #007aff;}
.hoje{border-left:6px solid #34c759;}
.passado{opacity:.5;}

.apagar{
margin-top:8px;
background:#ff3b30;
}

</style>
</head>

<body>

<h2>Me Lembre Depois</h2>

<input id="texto" placeholder="Digite algo...">
<input type="datetime-local" id="data">

<button onclick="adicionar()">+ Novo Lembrete</button>

<div id="lista"></div>

<script>

let lembretes = JSON.parse(localStorage.getItem("lembretes")||"[]")

function salvar(){
localStorage.setItem("lembretes",JSON.stringify(lembretes))
render()
}

function vibrar(){
if(navigator.vibrate){
navigator.vibrate(40)
}
}

function icone(texto){
texto = texto.toLowerCase()
if(texto.includes("anivers")) return "ðŸŽ‚"
if(texto.includes("tarefa")) return "ðŸ“„"
return "ðŸ“…"
}

function adicionar(){

let texto = document.getElementById("texto").value
let data = document.getElementById("data").value

if(!texto || !data) return

lembretes.push({id:Date.now(),texto,data})
salvar()
vibrar()

document.getElementById("texto").value=""
}

function diasRestantes(data){

let hoje = new Date()
let futuro = new Date(data)

let diff = futuro-hoje
let dias = Math.ceil(diff/(1000*60*60*24))

if(dias<0) return {txt:"JÃ¡ passou",classe:"passado"}
if(dias===0) return {txt:"Hoje",classe:"hoje"}
if(dias===1) return {txt:"Falta 1 dia",classe:"proximo"}
return {txt:"Faltam "+dias+" dias",classe:"proximo"}
}

function apagar(id){
lembretes = lembretes.filter(l=>l.id!==id)
salvar()
}

function render(){

let div = document.getElementById("lista")
div.innerHTML=""

lembretes.sort((a,b)=> new Date(a.data)-new Date(b.data))

lembretes.forEach(l=>{

let info = diasRestantes(l.data)

div.innerHTML+=`
<div class="card ${info.classe}">
<b>${icone(l.texto)} ${l.texto}</b>
<div class="data">${new Date(l.data).toLocaleString()}</div>
<div class="faltam">${info.txt}</div>
<button class="apagar" onclick="apagar(${l.id})">Apagar</button>
</div>
`
})
}

render()

if('serviceWorker' in navigator){
navigator.serviceWorker.register('service-worker.js')
}

</script>

</body>
</html>
